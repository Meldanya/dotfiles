####################################################
##                    BINDINGS                    ##
# Mostly bindings to make tmux behave like screen. #
####################################################
set -g prefix C-a               # Set prefix to C-a as in screen
unbind C-b                      # Unbind old prefix key

bind a       send-prefix        # Allow passing C-a to eg. vim
bind Escape  copy-mode -u       # Use [prefix] Esc to enter copy mode
bind C-a     last-window        # Use [prefix] C-a to switch to last used window
bind C-Space next-window        # Use [prefix] C-Space to switch to next window
bind C-p     previous-window    # Use [prefix] C-p to switch to previous window
bind C-n     next-window        # Use [prefix] C-n to switch to next window
bind C-c     new-window         # Use [prefix] C-c to create a new window
bind -       split-window -v    # Use [prefix] - to split vertically
bind \       split-window -h    # Use [prefix] \ to split horizontally
bind |       split-window -h    # Use [prefix] \ to split horizontally
bind Left    resize-pane -L 1   # Use [prefix] left arrow to resize current pane sideways
bind C-h     resize-pane -L 5   # Use [prefix] C-h to resize current pane sideways
bind Right   resize-pane -R 1   # Use [prefix] right arrow to resize current pane sideways
bind C-l     resize-pane -R 5   # Use [prefix] C-l to resize current pane sideways
bind Down    resize-pane -D 1   # Use [prefix] down arrow to resize current pane sideways
bind C-j     resize-pane -D 5   # Use [prefix] C-j to resize current pane up/down
bind Up      resize-pane -U 1   # Use [prefix] up arrow to resize current pane sideways
bind C-k     resize-pane -U 5   # Use [prefix] C-k to resize current pane up/down
bind C-d     detach             # Use [prefix] C-d to detach

bind h       select-pane -L     # Use [prefix] h to change to the left pane
bind j       select-pane -D     # Use [prefix] j to change to the lower pane
bind k       select-pane -U     # Use [prefix] k to change to the upper pane
bind l       select-pane -R     # Use [prefix] l to change to the right pane

# Reload tmux config on [prefix] r
bind r       source-file ~/.tmux.conf; display-message " âœ± conf reloaded"

# Bind [prefix] / to opening a new split windows with a man page
bind /       command-prompt "split-window -h 'exec man %%'"

#######################################################
##                   MISCELLANEOUS                   ##
# Other stuff that doesn't fit under the other items. #
#######################################################

set   -g default-command   "rtun -l /bin/zsh" # An ugly hack to make sure vim's paste and copy works (and more stuff)
set   -g default-terminal  "screen-256color"  # Sets the default terminal for new windows created
set   -g history-limit     20000              # Set lines of history to something huge
set-o -g display-time      1500               # Keep tmux messages around longer
setw  -g mode-keys         vi                 # Use vi style key bindings in copy and choice modes
set   -g status-keys       vi                 # Use vi style key bindings in statusbar
set-o -g mouse-resize-pane on                 # Use mouse to resize panes
setw  -g allow-rename      off                # Don't allow rename of panes

##################################################
##                  STATUS BAR                  ##
# Everything that has to do with the status bar. #
##################################################

# Source tmux-colors-solarized
source ~/src/tmux-colors-solarized/tmuxcolors.conf

# Set options for tmux-powerline
set-o -g status              on
set-o -g status-interval     2
set-o -g status-utf8         on
set-o -g status-justify      "centre"
set-o -g status-left-length  120
set-o -g status-right-length 120
set-o -g status-left         "#(~/src/tmux-powerline/powerline.sh left)"
set-o -g status-right        "#(~/src/tmux-powerline/powerline.sh right)"

# Mute left statusbar
bind C-[ run "~/src/tmux-powerline/mute_powerline.sh left"
# Mute right statusbar
bind C-] run "~/src/tmux-powerline/mute_powerline.sh right"
